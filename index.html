<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Readability Analyzer - Complete Edition</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Icons
        const Upload = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
        );
        
        const FileText = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
            </svg>
        );
        
        const BarChart3 = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M3 3v18h18"></path>
                <path d="M18 17V9"></path>
                <path d="M13 17V5"></path>
                <path d="M8 17v-3"></path>
            </svg>
        );

        function TextAnalyzer() {
            const [text, setText] = useState('');
            const [results, setResults] = useState(null);
            const [loading, setLoading] = useState(false);
            const [wordData, setWordData] = useState(null);
            const [wordDataLoading, setWordDataLoading] = useState(true);

            // Load word data on mount
            useEffect(() => {
                console.log('Attempting to fetch worddata.json...');
                fetch('worddata.json')
                    .then(response => {
                        console.log('Fetch response status:', response.status);
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Word data loaded:', {
                            high: data.high?.length,
                            medium: data.medium?.length,
                            low: data.low?.length,
                            daleChall: data.daleChall?.length
                        });
                        // Convert arrays to Sets for fast lookup
                        setWordData({
                            high: new Set(data.high),
                            medium: new Set(data.medium),
                            low: new Set(data.low),
                            daleChall: new Set(data.daleChall)
                        });
                        setWordDataLoading(false);
                        console.log('✓ Word data successfully loaded and converted to Sets');
                    })
                    .catch(error => {
                        console.error('❌ Error loading word data:', error);
                        alert('Failed to load vocabulary database. Familiarity and Dale-Chall scores will not be available. Error: ' + error.message);
                        setWordDataLoading(false);
                    });
            }, []);

            const analyzeText = () => {
                if (!text.trim()) {
                    alert('Please enter some text to analyze');
                    return;
                }

                setLoading(true);
                
                setTimeout(() => {
                    try {
                        const analysis = performAnalysis(text);
                        setResults(analysis);
                    } catch (error) {
                        console.error('Analysis error:', error);
                        alert('Error analyzing text: ' + error.message);
                    } finally {
                        setLoading(false);
                    }
                }, 100);
            };

            const performAnalysis = (text) => {
                // Basic counts
                const words = text.trim().split(/\s+/).filter(w => w.length > 0);
                const wordCount = words.length;
                const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
                const sentenceCount = sentences.length;
                const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);
                const paragraphCount = paragraphs.length;

                const characters = text.replace(/\s/g, '').length;
                const syllables = countSyllables(text);
                const complexWords = words.filter(w => countWordSyllables(w) >= 3).length;

                const avgSentenceLength = wordCount / sentenceCount;
                const avgWordLength = characters / wordCount;
                const avgSyllablesPerWord = syllables / wordCount;
                const complexWordPercentage = (complexWords / wordCount) * 100;

                const sentenceLengths = sentences.map(s => s.trim().split(/\s+/).length);
                const longestSentence = Math.max(...sentenceLengths);
                const shortestSentence = Math.min(...sentenceLengths);

                const paragraphLengths = paragraphs.map(p => p.trim().split(/\s+/).length);
                const avgParagraphLength = paragraphLengths.reduce((a, b) => a + b, 0) / paragraphCount;

                const uniqueWords = new Set(words.map(w => w.toLowerCase()));
                const lexicalDiversity = (uniqueWords.size / wordCount) * 100;
                const readingTimeMinutes = wordCount / 200;

                // Calculate vocabulary metrics if word data is loaded
                let vocabularyMetrics = null;
                if (wordData) {
                    vocabularyMetrics = analyzeVocabulary(words, wordData, sentenceCount);
                }

                const readability = {
                    fleschReading: calculateFleschReading(wordCount, sentenceCount, syllables),
                    fleschKincaid: calculateFleschKincaid(wordCount, sentenceCount, syllables),
                    gunningFog: calculateGunningFog(wordCount, sentenceCount, complexWords),
                    smog: calculateSMOG(sentenceCount, complexWords),
                    ari: calculateARI(characters, wordCount, sentenceCount),
                    colemanLiau: calculateColemanLiau(characters, wordCount, sentenceCount)
                };

                return {
                    basic: { wordCount, sentenceCount, paragraphCount, readingTimeMinutes },
                    averages: { avgSentenceLength, avgWordLength, avgSyllablesPerWord, avgParagraphLength },
                    complexity: { complexWords, complexWordPercentage, lexicalDiversity, syllables },
                    sentenceStats: { longestSentence, shortestSentence },
                    readability,
                    vocabulary: vocabularyMetrics
                };
            };

            const analyzeVocabulary = (words, data, sentenceCount) => {
                let highCount = 0, mediumCount = 0, lowCount = 0, unknownCount = 0;
                let daleChallDifficult = 0;

                words.forEach(word => {
                    const cleaned = word.toLowerCase().replace(/[^a-z]/g, '');
                    if (!cleaned) return;

                    if (data.high.has(cleaned)) highCount++;
                    else if (data.medium.has(cleaned)) mediumCount++;
                    else if (data.low.has(cleaned)) lowCount++;
                    else unknownCount++;

                    if (!data.daleChall.has(cleaned)) daleChallDifficult++;
                });

                const total = words.length;
                const familiarityScore = ((mediumCount * 0.5 + lowCount * 1.0 + unknownCount * 1.5) / total) * 100;
                const daleChallScore = calculateDaleChall(words.length, sentenceCount, daleChallDifficult);

                return {
                    high: { count: highCount, percentage: (highCount / total) * 100 },
                    medium: { count: mediumCount, percentage: (mediumCount / total) * 100 },
                    low: { count: lowCount, percentage: (lowCount / total) * 100 },
                    unknown: { count: unknownCount, percentage: (unknownCount / total) * 100 },
                    familiarityScore,
                    daleChall: {
                        difficult: daleChallDifficult,
                        percentage: (daleChallDifficult / total) * 100,
                        score: daleChallScore
                    }
                };
            };

            const calculateDaleChall = (words, sentences, difficultWords) => {
                const percentDifficult = (difficultWords / words) * 100;
                const avgSentenceLength = words / sentences;
                return 0.1579 * percentDifficult + 0.0496 * avgSentenceLength;
            };

            const countWordSyllables = (word) => {
                word = word.toLowerCase().replace(/[^a-z]/g, '');
                if (word.length <= 3) return 1;
                
                word = word.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/, '');
                word = word.replace(/^y/, '');
                const syllableMatches = word.match(/[aeiouy]{1,2}/g);
                return syllableMatches ? syllableMatches.length : 1;
            };

            const countSyllables = (text) => {
                const words = text.toLowerCase().split(/\s+/).filter(w => w.length > 0);
                return words.reduce((total, word) => total + countWordSyllables(word), 0);
            };

            const calculateFleschReading = (words, sentences, syllables) => {
                return 206.835 - 1.015 * (words / sentences) - 84.6 * (syllables / words);
            };

            const calculateFleschKincaid = (words, sentences, syllables) => {
                return 0.39 * (words / sentences) + 11.8 * (syllables / words) - 15.59;
            };

            const calculateGunningFog = (words, sentences, complexWords) => {
                return 0.4 * ((words / sentences) + 100 * (complexWords / words));
            };

            const calculateSMOG = (sentences, complexWords) => {
                return 1.0430 * Math.sqrt(complexWords * (30 / sentences)) + 3.1291;
            };

            const calculateARI = (characters, words, sentences) => {
                return 4.71 * (characters / words) + 0.5 * (words / sentences) - 21.43;
            };

            const calculateColemanLiau = (characters, words, sentences) => {
                const L = (characters / words) * 100;
                const S = (sentences / words) * 100;
                return 0.0588 * L - 0.296 * S - 15.8;
            };

            const getReadabilityInterpretation = (score, type) => {
                if (type === 'flesch') {
                    if (score >= 90) return { level: 'Very Easy', grade: '5th grade', color: 'text-green-600' };
                    if (score >= 80) return { level: 'Easy', grade: '6th grade', color: 'text-green-500' };
                    if (score >= 70) return { level: 'Fairly Easy', grade: '7th grade', color: 'text-blue-600' };
                    if (score >= 60) return { level: 'Standard', grade: '8th-9th grade', color: 'text-blue-500' };
                    if (score >= 50) return { level: 'Fairly Difficult', grade: '10th-12th grade', color: 'text-yellow-600' };
                    if (score >= 30) return { level: 'Difficult', grade: 'College', color: 'text-orange-600' };
                    return { level: 'Very Difficult', grade: 'College graduate', color: 'text-red-600' };
                } else {
                    if (score < 6) return { level: 'Elementary', color: 'text-green-600' };
                    if (score < 9) return { level: 'Middle School', color: 'text-blue-600' };
                    if (score < 13) return { level: 'High School', color: 'text-yellow-600' };
                    if (score < 16) return { level: 'College', color: 'text-orange-600' };
                    return { level: 'Graduate', color: 'text-red-600' };
                }
            };

            const getDaleChallInterpretation = (score) => {
                if (score < 5.0) return { level: 'Grade 4 and below', color: 'text-green-600' };
                if (score < 6.0) return { level: 'Grades 5-6', color: 'text-green-500' };
                if (score < 7.0) return { level: 'Grades 7-8', color: 'text-blue-600' };
                if (score < 8.0) return { level: 'Grades 9-10', color: 'text-yellow-600' };
                if (score < 9.0) return { level: 'Grades 11-12', color: 'text-orange-600' };
                if (score < 10.0) return { level: 'Grades 13-15 (College)', color: 'text-red-500' };
                return { level: 'Grade 16+ (College Graduate)', color: 'text-red-600' };
            };

            const getFamiliarityInterpretation = (score) => {
                if (score < 15) return { level: 'Very Familiar', desc: 'Everyday vocabulary', color: 'text-green-600' };
                if (score < 30) return { level: 'Familiar', desc: 'Accessible language', color: 'text-blue-600' };
                if (score < 45) return { level: 'Moderate', desc: 'Some challenging terms', color: 'text-yellow-600' };
                if (score < 60) return { level: 'Challenging', desc: 'Academic vocabulary', color: 'text-orange-600' };
                return { level: 'Very Challenging', desc: 'Specialized terminology', color: 'text-red-600' };
            };

            const handleFileUpload = (e) => {
                const file = e.target.files[0];
                if (file && file.type === 'text/plain') {
                    const reader = new FileReader();
                    reader.onload = (event) => setText(event.target.result);
                    reader.readAsText(file);
                }
            };

            const getInsights = () => {
                if (!results) return [];
                
                const insights = [];
                const { readability, averages, complexity, sentenceStats, vocabulary } = results;

                const grades = [
                    readability.fleschKincaid,
                    readability.gunningFog,
                    readability.smog,
                    readability.ari,
                    readability.colemanLiau
                ];
                const maxGrade = Math.max(...grades);
                const minGrade = Math.min(...grades);
                
                if (maxGrade - minGrade > 4) {
                    insights.push({
                        type: 'warning',
                        text: `Score variation: readability measures span ${minGrade.toFixed(1)} to ${maxGrade.toFixed(1)} grade level—mixed complexity detected.`
                    });
                }

                if (sentenceStats.longestSentence > 40) {
                    insights.push({
                        type: 'alert',
                        text: `Longest sentence: ${sentenceStats.longestSentence} words—consider breaking up for readability.`
                    });
                }

                if (complexity.complexWordPercentage > 20) {
                    insights.push({
                        type: 'info',
                        text: `${complexity.complexWordPercentage.toFixed(1)}% complex words (3+ syllables)—above typical journalism range (15-18%).`
                    });
                }

                if (vocabulary && vocabulary.low.percentage > 10) {
                    insights.push({
                        type: 'info',
                        text: `${vocabulary.low.percentage.toFixed(1)}% low-familiarity vocabulary—specialized terminology present.`
                    });
                }

                if (vocabulary && vocabulary.daleChall.percentage > 5) {
                    insights.push({
                        type: 'info',
                        text: `${vocabulary.daleChall.percentage.toFixed(1)}% difficult words by Dale-Chall standards (not in common 3,000 word list).`
                    });
                }

                return insights;
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8">
                    <div className="max-w-6xl mx-auto">
                        <div className="mb-8">
                            <h1 className="text-4xl font-bold text-slate-800 mb-2">Text Readability Analyzer</h1>
                            <p className="text-slate-600">
                                Complete analysis with 8 readability metrics, GPT-4 familiarity data, and Dale-Chall vocabulary assessment
                            </p>
                            {wordDataLoading && (
                                <p className="text-sm text-slate-500 mt-2">⏳ Loading vocabulary database (33,673 words)...</p>
                            )}
                            {!wordDataLoading && wordData && (
                                <p className="text-sm text-green-600 mt-2">✓ Vocabulary database loaded (33,673 words)</p>
                            )}
                        </div>

                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <div className="mb-4">
                                <div className="flex items-center justify-between mb-2">
                                    <label className="block text-sm font-semibold text-slate-700 flex items-center gap-1">
                                        <FileText />
                                        Input Text
                                    </label>
                                    <label className="cursor-pointer flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded text-sm text-slate-700 transition-colors">
                                        <Upload />
                                        Upload .txt
                                        <input type="file" accept=".txt" onChange={handleFileUpload} className="hidden" />
                                    </label>
                                </div>
                                <textarea
                                    value={text}
                                    onChange={(e) => setText(e.target.value)}
                                    placeholder="Paste your text here, or upload a .txt file above..."
                                    className="w-full h-64 p-4 border-2 border-slate-200 rounded-lg focus:border-blue-500 focus:outline-none resize-none font-mono text-sm"
                                />
                            </div>
                            
                            <button
                                onClick={analyzeText}
                                disabled={!text.trim() || loading}
                                className="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
                            >
                                <BarChart3 />
                                {loading ? 'Analyzing...' : 'Analyze Text'}
                            </button>
                        </div>

                        {results && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-4">Overview</h2>
                                    <div className="grid grid-cols-4 gap-4">
                                        <div className="bg-blue-50 p-4 rounded-lg">
                                            <div className="text-3xl font-bold text-blue-600">{results.basic.wordCount.toLocaleString()}</div>
                                            <div className="text-sm text-slate-600">Words</div>
                                        </div>
                                        <div className="bg-green-50 p-4 rounded-lg">
                                            <div className="text-3xl font-bold text-green-600">{results.basic.sentenceCount}</div>
                                            <div className="text-sm text-slate-600">Sentences</div>
                                        </div>
                                        <div className="bg-purple-50 p-4 rounded-lg">
                                            <div className="text-3xl font-bold text-purple-600">{results.basic.paragraphCount}</div>
                                            <div className="text-sm text-slate-600">Paragraphs</div>
                                        </div>
                                        <div className="bg-amber-50 p-4 rounded-lg">
                                            <div className="text-3xl font-bold text-amber-600">
                                                {results.basic.readingTimeMinutes < 1 ? '<1' : results.basic.readingTimeMinutes.toFixed(1)}
                                            </div>
                                            <div className="text-sm text-slate-600">Minutes (@ 200 wpm)</div>
                                            <div className="text-xs text-slate-500 mt-1">College readers: ~250 wpm</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-4">Readability Scores</h2>
                                    <div className="space-y-3">
                                        {results.vocabulary && (
                                            <>
                                                <div className="p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border-2 border-blue-200">
                                                    <div className="flex items-center justify-between mb-2">
                                                        <div className="flex-1">
                                                            <div className="font-bold text-slate-800 text-lg">Familiarity-Based Vocabulary Score (GPT-4)</div>
                                                            <div className={`text-sm font-semibold ${getFamiliarityInterpretation(results.vocabulary.familiarityScore).color}`}>
                                                                {getFamiliarityInterpretation(results.vocabulary.familiarityScore).level} — {getFamiliarityInterpretation(results.vocabulary.familiarityScore).desc}
                                                            </div>
                                                        </div>
                                                        <div className="text-3xl font-bold text-slate-800">
                                                            {results.vocabulary.familiarityScore.toFixed(1)}
                                                        </div>
                                                    </div>
                                                    <div className="text-xs text-slate-600 mt-2 bg-white/50 p-2 rounded">
                                                        AI-estimated word familiarity (2024 research). Most accurate vocabulary metric. Lower = easier.
                                                    </div>
                                                </div>

                                                <div className="p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-200">
                                                    <div className="flex items-center justify-between mb-2">
                                                        <div className="flex-1">
                                                            <div className="font-bold text-slate-800 text-lg">Dale-Chall Readability</div>
                                                            <div className={`text-sm font-semibold ${getDaleChallInterpretation(results.vocabulary.daleChall.score).color}`}>
                                                                {getDaleChallInterpretation(results.vocabulary.daleChall.score).level}
                                                            </div>
                                                        </div>
                                                        <div className="text-3xl font-bold text-slate-800">
                                                            {results.vocabulary.daleChall.score.toFixed(1)}
                                                        </div>
                                                    </div>
                                                    <div className="text-xs text-slate-600 mt-2 bg-white/50 p-2 rounded">
                                                        Based on 3,000 common words. Classic vocabulary measure. Higher = more difficult.
                                                    </div>
                                                </div>
                                            </>
                                        )}

                                        {[
                                            { name: 'Flesch Reading Ease', score: results.readability.fleschReading, type: 'flesch' },
                                            { name: 'Flesch-Kincaid Grade Level', score: results.readability.fleschKincaid, type: 'grade' },
                                            { name: 'Gunning Fog Index', score: results.readability.gunningFog, type: 'grade' },
                                            { name: 'SMOG Index', score: results.readability.smog, type: 'grade' },
                                            { name: 'Automated Readability Index (ARI)', score: results.readability.ari, type: 'grade' },
                                            { name: 'Coleman-Liau Index', score: results.readability.colemanLiau, type: 'grade' }
                                        ].map((metric) => {
                                            const interp = getReadabilityInterpretation(metric.score, metric.type);
                                            return (
                                                <div key={metric.name} className="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                                    <div className="flex-1">
                                                        <div className="font-semibold text-slate-700">{metric.name}</div>
                                                        <div className={`text-sm ${interp.color}`}>
                                                            {metric.type === 'flesch' ? `${interp.level} (${interp.grade})` : interp.level}
                                                        </div>
                                                    </div>
                                                    <div className="text-2xl font-bold text-slate-800">
                                                        {metric.score.toFixed(1)}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>

                                {results.vocabulary && (
                                    <div className="bg-white rounded-lg shadow-lg p-6">
                                        <h2 className="text-2xl font-bold text-slate-800 mb-4">Vocabulary Familiarity Analysis</h2>
                                        <div className="grid grid-cols-2 gap-4 mb-6">
                                            <div className="p-4 bg-green-50 rounded-lg border border-green-200">
                                                <div className="text-sm text-slate-600 mb-1">High Familiarity</div>
                                                <div className="text-2xl font-bold text-green-700">
                                                    {results.vocabulary.high.count.toLocaleString()} ({results.vocabulary.high.percentage.toFixed(1)}%)
                                                </div>
                                                <div className="text-xs text-slate-500 mt-1">Everyday words</div>
                                            </div>
                                            <div className="p-4 bg-blue-50 rounded-lg border border-blue-200">
                                                <div className="text-sm text-slate-600 mb-1">Medium Familiarity</div>
                                                <div className="text-2xl font-bold text-blue-700">
                                                    {results.vocabulary.medium.count.toLocaleString()} ({results.vocabulary.medium.percentage.toFixed(1)}%)
                                                </div>
                                                <div className="text-xs text-slate-500 mt-1">Academic vocabulary</div>
                                            </div>
                                            <div className="p-4 bg-orange-50 rounded-lg border border-orange-200">
                                                <div className="text-sm text-slate-600 mb-1">Low Familiarity</div>
                                                <div className="text-2xl font-bold text-orange-700">
                                                    {results.vocabulary.low.count.toLocaleString()} ({results.vocabulary.low.percentage.toFixed(1)}%)
                                                </div>
                                                <div className="text-xs text-slate-500 mt-1">Specialized terms</div>
                                            </div>
                                            <div className="p-4 bg-slate-100 rounded-lg border border-slate-300">
                                                <div className="text-sm text-slate-600 mb-1">Unknown</div>
                                                <div className="text-2xl font-bold text-slate-700">
                                                    {results.vocabulary.unknown.count.toLocaleString()} ({results.vocabulary.unknown.percentage.toFixed(1)}%)
                                                </div>
                                                <div className="text-xs text-slate-500 mt-1">Not in database</div>
                                            </div>
                                        </div>
                                        
                                        <div className="p-4 bg-amber-50 rounded-lg border border-amber-200">
                                            <div className="text-sm text-slate-600 mb-1">Dale-Chall Difficult Words</div>
                                            <div className="text-2xl font-bold text-amber-700">
                                                {results.vocabulary.daleChall.difficult.toLocaleString()} ({results.vocabulary.daleChall.percentage.toFixed(1)}%)
                                            </div>
                                            <div className="text-xs text-slate-500 mt-1">Words not in Dale-Chall 3,000 common word list</div>
                                        </div>
                                    </div>
                                )}

                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-4">Lexical Complexity</h2>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Average Word Length</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.averages.avgWordLength.toFixed(2)} characters</div>
                                        </div>
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Syllables per Word</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.averages.avgSyllablesPerWord.toFixed(2)}</div>
                                        </div>
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Complex Words (3+ syllables)</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.complexity.complexWords} ({results.complexity.complexWordPercentage.toFixed(1)}%)</div>
                                        </div>
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Lexical Diversity</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.complexity.lexicalDiversity.toFixed(1)}%</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow-lg p-6">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-4">Structural Patterns</h2>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Average Sentence Length</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.averages.avgSentenceLength.toFixed(1)} words</div>
                                        </div>
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Average Paragraph Length</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.averages.avgParagraphLength.toFixed(1)} words</div>
                                        </div>
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Longest Sentence</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.sentenceStats.longestSentence} words</div>
                                        </div>
                                        <div className="p-4 bg-slate-50 rounded-lg">
                                            <div className="text-sm text-slate-600 mb-1">Shortest Sentence</div>
                                            <div className="text-2xl font-bold text-slate-800">{results.sentenceStats.shortestSentence} words</div>
                                        </div>
                                    </div>
                                </div>

                                {getInsights().length > 0 && (
                                    <div className="bg-white rounded-lg shadow-lg p-6">
                                        <h2 className="text-2xl font-bold text-slate-800 mb-4">Analytical Insights</h2>
                                        <div className="space-y-2">
                                            {getInsights().map((insight, idx) => (
                                                <div key={idx} className={`p-3 rounded-lg ${
                                                    insight.type === 'warning' ? 'bg-yellow-50 border border-yellow-200' :
                                                    insight.type === 'alert' ? 'bg-red-50 border border-red-200' :
                                                    'bg-blue-50 border border-blue-200'
                                                }`}>
                                                    <p className="text-sm text-slate-700">{insight.text}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-lg p-6 border-2 border-blue-200">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-3">Summary for Text-to-Speech Integration</h2>
                                    <p className="text-sm text-slate-600 mb-4">Copy this text for audio conversion projects:</p>
                                    <textarea
                                        readOnly
                                        value={`Words: ${results.basic.wordCount}
Reading Time: ${results.basic.readingTimeMinutes.toFixed(1)} minutes (@ 200 wpm)
Flesch Reading Ease: ${results.readability.fleschReading.toFixed(1)}${results.vocabulary ? `
Familiarity Score: ${results.vocabulary.familiarityScore.toFixed(1)}
Dale-Chall: ${results.vocabulary.daleChall.score.toFixed(1)}` : ''}
SMOG Index: ${results.readability.smog.toFixed(1)}
Gunning Fog Index: ${results.readability.gunningFog.toFixed(1)}`}
                                        className="w-full p-4 bg-white border-2 border-blue-300 rounded font-mono text-sm resize-none"
                                        rows="8"
                                        onClick={(e) => e.target.select()}
                                    />
                                    <p className="text-xs text-slate-500 mt-2">Click inside the box to select all text, then copy (Ctrl+C / Cmd+C)</p>
                                </div>

                                <div className="bg-slate-800 text-white rounded-lg shadow-lg p-6">
                                    <h2 className="text-xl font-bold mb-3">Interpretation Guide</h2>
                                    <div className="space-y-4 text-sm">
                                        <div>
                                            <p className="font-semibold mb-2">Flesch Reading Ease Reference:</p>
                                            <table className="w-full text-xs border-collapse">
                                                <thead>
                                                    <tr className="border-b border-slate-600">
                                                        <th className="text-left py-2 px-2">Score</th>
                                                        <th className="text-left py-2 px-2">Estimated Reading Grade Level</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr className="border-b border-slate-700"><td className="py-1.5 px-2">90 to 100</td><td className="py-1.5 px-2">5th grade</td></tr>
                                                    <tr className="border-b border-slate-700"><td className="py-1.5 px-2">80 to 90</td><td className="py-1.5 px-2">6th grade</td></tr>
                                                    <tr className="border-b border-slate-700"><td className="py-1.5 px-2">70 to 80</td><td className="py-1.5 px-2">7th grade</td></tr>
                                                    <tr className="border-b border-slate-700"><td className="py-1.5 px-2">60 to 70</td><td className="py-1.5 px-2">8th and 9th grade</td></tr>
                                                    <tr className="border-b border-slate-700 bg-slate-700/30"><td className="py-1.5 px-2 font-semibold">50 to 60</td><td className="py-1.5 px-2 font-semibold">10th to 12th grade (high school)</td></tr>
                                                    <tr className="border-b border-slate-700"><td className="py-1.5 px-2">30 to 50</td><td className="py-1.5 px-2">College</td></tr>
                                                    <tr><td className="py-1.5 px-2">0 to 30</td><td className="py-1.5 px-2">College graduate</td></tr>
                                                </tbody>
                                            </table>
                                            <p className="text-xs mt-2 text-slate-400">Source: goodcalculators.com/flesch-kincaid-calculator</p>
                                        </div>
                                        <div className="border-t border-slate-600 pt-3 space-y-3">
                                            <div>
                                                <p className="font-semibold mb-2">Familiarity Score (GPT-4) Reference:</p>
                                                <table className="w-full text-xs border-collapse">
                                                    <thead>
                                                        <tr className="border-b border-slate-600">
                                                            <th className="text-left py-2 px-2">Score Range</th>
                                                            <th className="text-left py-2 px-2">Difficulty Level</th>
                                                            <th className="text-left py-2 px-2">Example</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">0 to 15</td><td className="py-1.5 px-2">Very Familiar</td><td className="py-1.5 px-2">Hemingway, Gettysburg Address</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">15 to 30</td><td className="py-1.5 px-2">Familiar</td><td className="py-1.5 px-2">Dr. Seuss, Mary Had a Little Lamb</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">30 to 45</td><td className="py-1.5 px-2">Moderate</td><td className="py-1.5 px-2">Standard journalism</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">45 to 60</td><td className="py-1.5 px-2">Challenging</td><td className="py-1.5 px-2">Academic writing</td></tr>
                                                        <tr><td className="py-1.5 px-2">60+</td><td className="py-1.5 px-2">Very Challenging</td><td className="py-1.5 px-2">Specialized/technical prose</td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div>
                                                <p className="font-semibold mb-2">Dale-Chall Score Reference:</p>
                                                <table className="w-full text-xs border-collapse">
                                                    <thead>
                                                        <tr className="border-b border-slate-600">
                                                            <th className="text-left py-2 px-2">Score Range</th>
                                                            <th className="text-left py-2 px-2">Grade Level</th>
                                                            <th className="text-left py-2 px-2">Example</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">Below 5.0</td><td className="py-1.5 px-2">Grade 4 and below</td><td className="py-1.5 px-2">Dr. Seuss, Mary Had a Little Lamb</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">5.0 to 6.0</td><td className="py-1.5 px-2">Grades 5-6</td><td className="py-1.5 px-2">Simple children's books</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">6.0 to 7.0</td><td className="py-1.5 px-2">Grades 7-8</td><td className="py-1.5 px-2">Middle school texts</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">7.0 to 8.0</td><td className="py-1.5 px-2">Grades 9-10</td><td className="py-1.5 px-2">Gettysburg Address, early high school</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">8.0 to 9.0</td><td className="py-1.5 px-2">Grades 11-12</td><td className="py-1.5 px-2">Late high school</td></tr>
                                                        <tr className="border-b border-slate-700"><td className="py-1.5 px-2">9.0 to 10.0</td><td className="py-1.5 px-2">Grades 13-15</td><td className="py-1.5 px-2">College, newspaper articles</td></tr>
                                                        <tr><td className="py-1.5 px-2">10.0+</td><td className="py-1.5 px-2">Grade 16+</td><td className="py-1.5 px-2">Academic journals, dense prose</td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div className="border-t border-slate-600 pt-3">
                                                <p className="text-xs"><strong>Reading Time:</strong> Calculated at 200 words per minute (average adult reading speed). College-educated readers typically read at ~250 wpm, while skimming can reach 400+ wpm. Technical material is generally read more slowly (~150-200 wpm).</p>
                                                <p className="text-xs mt-2"><strong>Note:</strong> Familiarity Score uses AI-estimated word familiarity (lower = more familiar). Dale-Chall uses a 3,000 common word list (higher = more difficult). Both complement the traditional readability formulas.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow-lg p-6 border-2 border-blue-200">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-3">Quick Summary (Copy-Paste Ready)</h2>
                                    <div className="bg-slate-50 p-4 rounded font-mono text-sm space-y-1">
                                        <div>Words: {results.basic.wordCount.toLocaleString()}</div>
                                        <div>Reading time: {results.basic.readingTimeMinutes < 1 ? 'Under 1' : results.basic.readingTimeMinutes.toFixed(1)} minutes (@ 200 wpm)</div>
                                        {results.vocabulary && (
                                            <>
                                                <div>Familiarity Score: {results.vocabulary.familiarityScore.toFixed(1)} ({getFamiliarityInterpretation(results.vocabulary.familiarityScore).level})</div>
                                                <div>Dale-Chall: {results.vocabulary.daleChall.score.toFixed(1)} ({getDaleChallInterpretation(results.vocabulary.daleChall.score).level})</div>
                                            </>
                                        )}
                                        <div>Gunning Fog: {results.readability.gunningFog.toFixed(1)} ({getReadabilityInterpretation(results.readability.gunningFog, 'grade').level})</div>
                                        <div>SMOG: {results.readability.smog.toFixed(1)} ({getReadabilityInterpretation(results.readability.smog, 'grade').level})</div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TextAnalyzer />);
    </script>
</body>
</html>
